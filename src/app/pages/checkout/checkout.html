<div class="min-h-screen bg-gray-50">
  <section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
    <!-- Header -->
    <header class="mb-8">
      <div class="flex items-center justify-between gap-4">
        <a
          [routerLink]="['/Book-a-wash/confirm']"
          class="inline-flex items-center text-sm font-medium text-indigo-600 hover:text-indigo-800"
          [state]="state()"
        >
          <svg class="h-4 w-4 mr-1" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          Back to confirm
        </a>

        <ol class="hidden sm:flex items-center text-xs text-gray-500 gap-2">
          <li class="px-2.5 py-1 rounded-full bg-gray-100">1. Select</li>
          <li class="h-px w-6 bg-gray-300"></li>
          <li class="px-2.5 py-1 rounded-full bg-gray-100">2. Details</li>
          <li class="h-px w-6 bg-gray-300"></li>
          <li class="px-2.5 py-1 rounded-full bg-gray-100">3. Confirm</li>
          <li class="h-px w-6 bg-gray-300"></li>
          <li class="px-2.5 py-1 rounded-full bg-indigo-600 text-white">4. Checkout</li>
        </ol>
      </div>

      <div class="mt-4 inline-flex items-center gap-2 rounded-full bg-indigo-50 text-indigo-700 px-3 py-1 text-xs font-semibold border border-indigo-200">
        <span class="h-2 w-2 rounded-full bg-indigo-500"></span>
        <span>Checkout</span>
      </div>
      <h1 class="mt-3 text-3xl sm:text-4xl font-extrabold tracking-tight text-gray-900">Payment & confirmation</h1>
      <p class="mt-1 text-gray-600" *ngIf="hasData">Choose how you want to pay and place your booking.</p>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
      <!-- Payment form -->
      <div class="lg:col-span-2">
        <form class="rounded-2xl border border-gray-200 bg-white p-6 sm:p-8 shadow-sm space-y-6" (ngSubmit)="placeOrder()">
          <section>
            <h2 class="text-lg font-semibold text-gray-900">Payment method</h2>
            <div class="mt-4 space-y-3">
              <label class="flex items-center gap-3 rounded-xl border p-4 hover:bg-gray-50">
                <input
                  type="radio"
                  name="payment"
                  value="pay_on_site"
                  [checked]="paymentMethod() === 'pay_on_site'"
                  (change)="paymentMethod.set('pay_on_site')"
                />
                <span class="text-sm text-gray-900">Pay at branch (cash/card)</span>
              </label>
              <label class="flex items-center gap-3 rounded-xl border p-4 hover:bg-gray-50">
                <input
                  type="radio"
                  name="payment"
                  value="card"
                  [checked]="paymentMethod() === 'card'"
                  (change)="paymentMethod.set('card')"
                />
                <span class="text-sm text-gray-900">Pay now by card</span>
              </label>
              <label class="flex items-center gap-3 rounded-xl border p-4 hover:bg-gray-50">
                <input
                  type="radio"
                  name="payment"
                  value="eft"
                  [checked]="paymentMethod() === 'eft'"
                  (change)="paymentMethod.set('eft')"
                />
                <span class="text-sm text-gray-900">EFT (bank transfer)</span>
              </label>
            </div>
          </section>

          <section class="pt-2">
            <label class="inline-flex items-center gap-3">
              <input type="checkbox" [checked]="termsAccepted()" (change)="termsAccepted.set($any($event.target).checked)" />
              <span class="text-sm text-gray-700">I agree to the booking terms and privacy policy.</span>
            </label>
          </section>

          <div class="flex items-center justify-end gap-3">
            <a [routerLink]="['/Book-a-wash/confirm']" class="text-sm text-gray-600 hover:text-gray-900" [state]="state()">Back</a>
            <button type="submit" class="inline-flex items-center justify-center rounded-xl bg-indigo-600 px-6 py-3 text-white text-sm font-semibold shadow hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
              Place booking
            </button>
          </div>
        </form>
      </div>

      <!-- Summary -->
      <aside class="lg:col-span-1">
        <div class="sticky top-8 rounded-2xl border border-gray-200 bg-white shadow-sm p-6">
          <h3 class="text-base font-semibold text-gray-900">Summary</h3>
          <dl class="mt-4 space-y-2 text-sm">
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Category</dt>
              <dd class="text-gray-900 uppercase">{{ state()?.type }}</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Package</dt>
              <dd class="text-gray-900">{{ state()?.option }}</dd>
            </div>
            <div class="flex items-start justify-between">
              <dt class="text-gray-600">Add-ons</dt>
              <dd class="text-right text-gray-900">{{ (state()?.addOns?.length || 0) }} selected</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Date</dt>
              <dd class="text-gray-900">{{ state()?.date || '—' }}</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Time</dt>
              <dd class="text-gray-900">{{ state()?.time || '—' }}</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Name</dt>
              <dd class="text-gray-900">{{ state()?.fullName || state()?.customer?.fullName || '—' }}</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Phone</dt>
              <dd class="text-gray-900">{{ state()?.phone || state()?.customer?.phone || '—' }}</dd>
            </div>
            <div class="flex items-center justify-between">
              <dt class="text-gray-600">Email</dt>
              <dd class="text-gray-900">{{ state()?.email || state()?.customer?.email || '—' }}</dd>
            </div>
          </dl>
          <div class="mt-4 border-t pt-4 flex items-center justify-between">
            <p class="text-sm text-gray-600">Total</p>
            <p class="text-2xl font-bold text-gray-900">R {{ total() }}</p>
          </div>
          <p class="mt-3 text-[11px] text-gray-500">Your booking is nearly complete. Choose your payment method and place the booking.</p>
        </div>
      </aside>
    </div>
  </section>
</div>